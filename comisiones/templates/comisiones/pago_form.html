{% extends "form.html" %}
{% load cliente_extras %}

{% block title %}Registrar pago{% endblock %}

{% block back_link %}
  <section class="filter-container">
    <div class="filter-title">Registrar pago — {{ mes_nombre|default_if_none:"" }} {{ anio|default_if_none:"" }}</div>
    <a href="{{ back_url|default_if_none:'' }}" class="btn-filter">Volver</a>
  </section>
{% endblock %}

{% block extra_actions %}
  {% if pago %}
    <button type="submit" class="btn-delete" formaction="{% url 'comisiones_pago_delete' pago.id %}" formmethod="post" onclick="return confirm('¿Eliminar este pago?');">Eliminar</button>
  {% endif %}
{% endblock %}

{% block form_fields %}
  <input type="hidden" name="next" value="{{ back_url|default_if_none:'' }}">
  <input type="hidden" name="mes" value="{{ mes|default_if_none:'' }}">
  <input type="hidden" name="anio" value="{{ anio|default_if_none:'' }}">

  <div class="form-grid">
    <div class="form-col">
      <label for="{{ form.comisionista.id_for_label }}">Comisionista</label>
      {% if comisionista %}
        <div class="fixed-center">{{ comisionista.nombre|default_if_none:"" }}</div>
        <input type="hidden" name="comisionista" value="{{ comisionista.id|default_if_none:'' }}">
      {% else %}
        {{ form.comisionista }}
      {% endif %}

      <label for="{{ form.fecha_pago.id_for_label }}">Fecha de pago</label>
      {{ form.fecha_pago }}

      <label for="{{ form.monto.id_for_label }}">Monto</label>
      <div class="input-currency">{{ form.monto }}</div>

      <label for="{{ form.comentario.id_for_label }}">Comentario</label>
      {{ form.comentario|default_if_none:"" }}
    </div>
  </div>
{% endblock %}
